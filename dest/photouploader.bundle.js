var PhotoUploader=function(){"use strict";var n=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function n(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),e=function(){function e(){n(this,e),this.targets={}}return t(e,[{key:"on",value:function(n,t){this.targets[n]=this.targets[n]||[],this.targets[n].push(t)}},{key:"off",value:function(n,t){this.targets[n]=this.targets[n].filter(function(n){return n!==t})}},{key:"fire",value:function(n){for(var t=arguments.length,e=Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];(this.targets[n]||[]).forEach(function(n){return n.apply(void 0,e)})}}]),e}(),i=function(n){return setTimeout(n,10)},o=function(n){var t=n;if("#"!==t[0]&&(t="#"+t),4===t.length){var e=parseInt(t.slice(1,2)+t.slice(1,2),16),i=parseInt(t.slice(2,3)+t.slice(2,3),16),o=parseInt(t.slice(3,4)+t.slice(3,4),16);return{r:e,g:i,b:o}}if(7===t.length){var s=parseInt(t.slice(1,3),16),r=parseInt(t.slice(3,5),16),a=parseInt(t.slice(5,7),16);return{r:s,g:r,b:a}}throw new Error("Bad hex provided")},s=function(n){var t=n.r,e=n.g,i=n.b,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return"rgba("+t+", "+e+", "+i+", "+o+")"},r=function(n){var t=n.className,e=n.primaryColor,i=n.secondaryColor;return"\n  ."+t+" {\n    position: absolute;\n    opacity: 0;\n    font-family: inherit;\n    background-color: "+s(e)+";\n    border: 1px solid "+s(i,.5)+";\n    border-radius: 3px;\n    box-shadow: 0 2px 20px rgba(0,0,0, .15);\n    transition: opacity .2s ease-in-out;\n  }\n  ."+t+"-anchor {\n    display: inline-block;\n    position: absolute;\n    bottom: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n    width: 0;\n    height: 0;\n    border-color: transparent;\n    border-bottom-color: "+s(i,.5)+";\n    border-style: solid;\n    border-width: 0 6px 6px 6px;\n  }\n\n  ."+t+"-primaryBox {\n    padding: 10px;\n    background-color: "+s(i,.1)+";\n  }\n  ."+t+"-actionBox {\n    position: relative;\n    width: 240px;\n    height: 240px;\n    text-align: center;\n    cursor: pointer;\n    background-color: "+s(e)+";\n    border: 2px dashed "+s(i,1)+";\n  }\n  ."+t+"-actionBox-content {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 100%;\n    transform: translate(-50%, -50%);\n    display: block;\n  }\n  ."+t+"-actionBox-content-picWrap {\n    display: block;\n    margin-bottom: 20px;\n  }\n  ."+t+"-actionBox-content-pic {\n    display: inline-block;\n    color: "+s(i)+";\n  }\n  ."+t+"-actionBox-content-pic svg {\n    display: block;\n    width: 64px;\n    height: 64px;\n  }\n  ."+t+"-actionBox-content-choose {\n    display: inline-block;\n    padding-bottom: 4px;\n    border-bottom: 2px solid "+s(i)+";\n    font-weight: bold;\n    color: "+s(i)+";\n  }\n  ."+t+"-actionBox-content-drag {\n    margin-top: 10px;\n    color: "+s(i,.5)+";\n  }\n  ."+t+"-actionBox-file-chooser {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: block;\n    width: 1px;\n    height: 1px;\n    opacity: 0;\n  }\n\n  ."+t+"-actions {\n    padding: 10px;\n    text-align: center;\n  }\n  ."+t+"-actionList {\n    list-style-type: none;\n    font-size: 0;\n    margin: 0;\n    padding-left: 0;\n  }\n  ."+t+"-actionList-item {\n    display: inline-block;\n  }\n  ."+t+"-actionList-item:not(:last-child) {\n    margin-right: 10px;\n  }\n  ."+t+"-actionBtn {\n    position: relative;\n    width: 32px;\n    height: 32px;\n    border-radius: 3px;\n    background-color: "+s(i,.5)+";\n    color: "+s(e)+";\n    cursor: pointer;\n  }\n  ."+t+"-actionBtn.is-selected {\n    background-color: "+s(i)+";\n  }\n  ."+t+"-actionBtn svg {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    display: block;\n    width: 18px;\n    height: 18px;\n  }\n\n  ."+t+"-progress {\n    padding: 10px;\n    text-align: center;\n    border-top: 2px solid "+s(i,.1)+";\n  }\n  ."+t+"-progressList {\n    list-style-type: none;\n    margin: 0;\n    font-size: 0;\n    padding-left: 0;\n  }\n  ."+t+"-progressList-item {\n    display: inline-block;\n    width: 6px;\n    height: 6px;\n    border-radius: 100%;\n    background-color: "+s(i,.25)+";\n  }\n  ."+t+"-progressList-item:not(:last-child) {\n    margin-right: 4px;\n  }\n  ."+t+"-progressList-item.is-selected {\n    background-color: "+s(i)+";\n  }\n"},a=function(n){var t=n.theme,e=void 0===t?"light":t,i=n.color,s=n.className,a=o("light"===e?"#fff":"#555"),l=o(i);return r({className:s,primaryColor:a,secondaryColor:l}).split(/\}\n[\s]*\./g).filter(function(n){return!!n}).map(function(n,t,e){return 0===t?n+"}":t===e.length-1?"."+n:"."+n+"}"})},l=function(n){var t=n.className;return'\n    <div style="display:block;width:0;height:0;">\n      <svg>\n        <symbol id="add-photo" viewBox="0 0 66 66">\n          <g transform="translate(1 1)" stroke-width="2" stroke="currentColor" fill="none" fill-rule="evenodd">\n            <path d="M42.343 41.958c-3.932-.828-8.786-1.425-14.61-1.425-11.882 0-19.727 2.487-23.95 4.36A6.376 6.376 0 0 0 0 50.738v11.129h34.133M12.8 14.933C12.8 6.686 19.486 0 27.733 0c8.248 0 14.934 6.686 14.934 14.933C42.667 23.181 35.98 32 27.733 32 19.486 32 12.8 23.18 12.8 14.933zM51.2 46.933v8.534M46.933 51.2h8.534"/>\n            <circle cx="51.2" cy="51.2" r="12.8"/>\n          </g>\n        </symbol>\n        <symbol id="upload" viewBox="0 0 20 14">\n          <path d="M16.71 5.839C16.258 2.484 13.42 0 10 0a6.732 6.732 0 0 0-6.42 4.613C1.485 5.065 0 6.87 0 9.033c0 2.354 1.839 4.322 4.194 4.515h12.29c1.968-.193 3.516-1.87 3.516-3.87a3.913 3.913 0 0 0-3.29-3.84zm-3.258 1.806a.293.293 0 0 1-.226.097.293.293 0 0 1-.226-.097l-2.677-2.677v6.322c0 .194-.13.323-.323.323-.194 0-.323-.13-.323-.323V4.968L7 7.645a.312.312 0 0 1-.452 0 .312.312 0 0 1 0-.451l3.226-3.226c.032-.033.065-.065.097-.065.064-.032.161-.032.258 0 .032.032.065.032.097.065l3.226 3.226a.312.312 0 0 1 0 .451z" stroke="none" fill="currentColor" fill-rule="evenodd"/>\n        </symbol>\n        <symbol id="take-picture" viewBox="0 0 18 16">\n          <path d="M6.097 1.161H2.032v-.87c0-.16.13-.291.29-.291h3.484c.16 0 .29.13.29.29v.871zM17.42 1.742H.58a.58.58 0 0 0-.58.58v12.775c0 .32.26.58.58.58h16.84c.32 0 .58-.26.58-.58V2.323a.58.58 0 0 0-.58-.581zM4.064 5.516a.581.581 0 1 1 0-1.162.581.581 0 0 1 0 1.162zm7.258 7.258A3.779 3.779 0 0 1 7.548 9a3.779 3.779 0 0 1 3.775-3.774A3.779 3.779 0 0 1 15.097 9a3.779 3.779 0 0 1-3.774 3.774z" stroke="none" fill="currentColor" fill-rule="evenodd"/>\n        </symbol>\n      </svg>\n    </div>\n    <div class="'+t+'-wrap">\n      <span class="'+t+'-anchor"></span>\n      <div class="'+t+'-primaryBox">\n        <div class="'+t+'-actionBox">\n          <div class="'+t+'-actionBox-content">\n            <div class="'+t+'-actionBox-content-picWrap">\n              <div class="'+t+'-actionBox-content-pic">\n                <svg>\n                  <use xlink:href="#add-photo"></use>\n                </svg>\n              </div>\n            </div>\n            <div class="'+t+'-actionBox-content-choose">\n              Choose Photo\n            </div>\n            <div class="'+t+'-actionBox-content-drag">\n              or drag an image file here\n            </div>\n            <input type="file" accept="image/*" class="'+t+'-actionBox-file-chooser" />\n          </div>\n        </div>\n      </div>\n      <div class="'+t+'-actions">\n        <ul class="'+t+'-actionList">\n          <li class="'+t+'-actionList-item">\n            <div class="'+t+'-actionBtn is-selected">\n              <svg>\n                <use xlink:href="#upload"></use>\n              </svg>\n            </div>\n          </li>\n          <li class="'+t+'-actionList-item">\n            <div class="'+t+'-actionBtn">\n              <svg>\n                <use xlink:href="#take-picture"></use>\n              </svg>\n            </div>\n          </li>\n        </ul>\n      </div>\n      <div class="'+t+'-progress">\n        <ul class="'+t+'-progressList">\n          <li class="'+t+'-progressList-item is-selected"></li>\n          <li class="'+t+'-progressList-item"></li>\n        </ul>\n      </div>\n    </div>\n  '},c=function(){function e(){n(this,e)}return t(e,[{key:"init",value:function(){return this}},{key:"destroy",value:function(){}},{key:"position",value:function(){}}]),e}(),d=function(){function e(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,e),this.photoBox=t,this.$target=i,this.options=o,this._handleTargetClick=this._handleTargetClick.bind(this),this._handleWindowResize=this._handleWindowResize.bind(this)}return t(e,[{key:"_handleTargetClick",value:function(n){n.stopPropagation(),this.photoBox.toggle()}},{key:"_handleWindowResize",value:function(n){this.position()}},{key:"init",value:function(){return this.$target.addEventListener("click",this._handleTargetClick),window.addEventListener("resize",this._handleWindowResize),this}},{key:"destroy",value:function(){this.$target.removeEventListener("click",this._handleTargetClick),window.removeEventListener("resize",this._handleWindowResize)}},{key:"position",value:function(){var n=this.$target.getBoundingClientRect();this.photoBox.setPosition({top:n.top+n.height+12,left:n.left-(this.photoBox.$el.offsetWidth/2-n.width/2)})}}]),e}(),h=function(){function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,o),this.$container=document.querySelector("body"),this.events=new e;var i={theme:"light",color:"#455054",className:"PictureBox"};this.options=Object.assign({},i,t),this.opened=!1,this.inited=!1,this.target=new c,this._handleDocumentClick=this._handleDocumentClick.bind(this),this._handleDocumentKeyup=this._handleDocumentKeyup.bind(this)}return t(o,[{key:"_handleDocumentClick",value:function(n){this.close()}},{key:"_handleDocumentKeyup",value:function(n){27===n.keyCode&&this.close()}},{key:"init",value:function(){return document.addEventListener("click",this._handleDocumentClick),document.addEventListener("keyup",this._handleDocumentKeyup),this.$el=this.createEl(),this.$el.addEventListener("click",function(n){n.stopPropagation()}),this.$container.appendChild(this.$el),this.sheet=this.createStyle(),this.inited=!0,this}},{key:"destroy",value:function(){if(!this.inited)throw new Error("Must be initialized before destroying.");this.$el.parentNode.removeChild(this.$el),this.$style.parentNode.removeChild(this.$style),document.removeEventListener("click",this._handleDocumentClick),document.removeEventListener("keyup",this._handleDocumentKeyup),this.target.destroy()}},{key:"attach",value:function(n){this.target=new d(this,n),this.target.init()}},{key:"createEl",value:function(){var n=this,t=document.createElement("div");return t.classList.add(this.options.className),t.innerHTML=l(this.options),i(function(){var e=t.querySelector("."+n.options.className+"-actionBox"),i=t.querySelector("."+n.options.className+"-actionBox-file-chooser");e.addEventListener("click",function(n){var t=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0});i.dispatchEvent(t)})}),t}},{key:"createStyle",value:function(){var n=document.createElement("style");return document.head.insertBefore(n,document.head.firstChild),a(this.options).forEach(function(t,e){n.sheet.insertRule(t,e)}),n.sheet}},{key:"toggle",value:function(){this.opened?this.close():this.open()}},{key:"open",value:function(){this.opened=!0,this.$el.style.opacity=1,this.$el.style.pointerEvents="auto",this.target.position()}},{key:"close",value:function(){this.$el.style.opacity=0,this.$el.style.pointerEvents="none",this.opened=!1}},{key:"setPosition",value:function(n){var t=this,e=n.top,i=n.left;(window.requestIdleCallback||window.setTimeout)(function(){t.$el.style.top=e+"px",t.$el.style.left=i+"px",t.events.fire("position",{top:e,left:i})})}}]),o}();return h}();
//# sourceMappingURL=photouploader.bundle.js.map
